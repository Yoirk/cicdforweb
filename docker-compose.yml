services:
  web:
    # 1. Thay vì dùng image gốc, ta dùng Image của chính mình trên GHCR
    # ${IMAGE_TAG} sẽ được truyền vào khi chạy lệnh deploy
    image: ghcr.io/Yoirk/cicdforweb:latest
    
    container_name: my-web-app
    restart: always
    ports:
      - "80:80"
      - "443:443"
    
    volumes:
      - /etc/letsencrypt:/etc/letsencrypt:ro
      
      - type: tmpfs
        target: /tmp
        tmpfs:
          mode: 01777
      - type: tmpfs
        target: /var/run
        tmpfs:
          mode: 01777
          
    user: "101"
    read_only: true